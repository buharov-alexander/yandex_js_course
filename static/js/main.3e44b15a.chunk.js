(window.webpackJsonpyandex_js_course=window.webpackJsonpyandex_js_course||[]).push([[0],{53:function(e,t,n){e.exports=n.p+"static/media/tasks.22394ca1.yaml"},54:function(e,t,n){e.exports=n.p+"static/media/users.d1d8527d.yaml"},60:function(e,t,n){e.exports=n(96)},65:function(e,t,n){},70:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),u=(n(65),n(25)),s=(n(70),n(20)),i=n(52),l=n(11),p="LOAD_USERS",m="LOAD_TASKS",f="LOAD_USER_TASKS",d="CHANGE_TAB",b="CHANGE_SORTING",h={users:new l.Map};var y={weeks:new l.List,tasks:new l.List};var v={NAME:"Name",SUM:"Sum"},w={ASC:"asc",DESC:"desc"},g={tab:"ALL",sortBy:v.SUM,direction:w.DESC},O=function(e){return e===w.DESC?w.ASC:w.DESC};var k=Object(s.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:var n=new l.Map(t.payload.map(function(e){return[e,null]}));return Object.assign({},e,{users:n});case f:var a=e.users.set(t.payload.user,t.payload.tasks);return Object.assign({},e,{users:a});default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object.assign({},e,t.payload);default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object.assign({},e,t.payload);case b:var n=t.payload.column,a=e.sortBy===n?O(e.direction):w.DESC;return Object.assign({},e,{sortBy:n,direction:a});default:return e}}}),E=function(){return Object(s.e)(k,Object(s.d)(Object(s.a)(i.a)))},j=n(121),S=n(129),C=n(130),L=n(122),x=n(131),A=n(123),N=Object(j.a)(function(){return{appBar:{backgroundColor:"#333"}}});var D=Object(u.b)(function(e){return{tab:e.ui.tab}},function(e){return{actions:{changeTab:function(t,n){return e({type:d,payload:{tab:n}})}}}})(function(e){var t=e.tab,n=e.actions,a=N();return r.a.createElement("div",null,r.a.createElement(L.a,{className:a.appBar,position:"static"},r.a.createElement(x.a,{value:t,onChange:n.changeTab},r.a.createElement(A.a,{value:"ALL",label:"All Weeks"}))))}),B=n(33),M=n(21),P=n(34),_=n(35),R=n(40),T=n(9),z=n(36),U=n.n(z),F=n(53),W=n.n(F),I=function(e){return fetch(W.a).then(function(e){return e.text()}).then(function(t){var n,a=(n=t,new l.List(U.a.safeLoad(n).map(function(e,t){return{name:"Week ".concat(t+1),tasks:new l.List(e),index:t}}))),r=function(e){return e.reduce(function(e,t){var n=t.tasks.map(function(e){return{name:e,weekIndex:t.index}});return e.concat(n)},new l.List)}(a),c={weeks:a,tasks:r};return e({type:m,payload:c}),c})},G=n(6),J=n(54),H=n.n(J);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var q=function(e,t){return function(n){fetch("https://j3300l2mej.execute-api.eu-west-1.amazonaws.com/dev/".concat(e.username)).then(function(e){return e.json()}).then(function(a){var r=a.data,c=t.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach(function(t){Object(G.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({result:r.find(function(t){return t.name===e.name})},e)});n({type:f,payload:{user:e,tasks:c}})})}},X=function(e){return fetch(H.a).then(function(e){return e.text()}).then(function(t){var n=U.a.safeLoad(t);return e({type:p,payload:n}),n})},Y=function(){return function(e){Promise.all([I(e),X(e)]).then(function(t){var n=Object(T.a)(t,2),a=n[0].tasks;n[1].map(function(t){return e(q(t,a))})})}},$=(n(50),n(4)),Q=n(126),V=n(128),Z=n(124),ee=n(127),te=n(125),ne=n(97),ae=n(132),re=Object(j.a)(function(){return{cell:{padding:"15px",textAlign:"center"},notStarted:{backgroundColor:"#FFFFFF"},partially:{backgroundColor:"#f7a531"},completed:{backgroundColor:"#8acc47"}}}),ce=function(e){var t=e.user,n=e.results,a=e.weeks,c=re();return r.a.createElement(te.a,null,r.a.createElement(Z.a,{component:"th",scope:"row"},function(e){return r.a.createElement("div",null,r.a.createElement("b",null,e.displayName),r.a.createElement("br",null),e.username)}(t)),r.a.createElement(Z.a,{component:"th",scope:"row"},"".concat(n.completedCount,"/").concat(n.allCount)),a.map(function(e){return function(e,t,n){var a=e.size,c=t.tasks.size,o=n.partially,u="".concat(a,"/").concat(c);return 0===a?(o=n.notStarted,u=0):a===c&&(o=n.completed,u=a),r.a.createElement(Z.a,{className:"".concat(o," ").concat(n.cell),key:t.name},"".concat(u))}(n.weekResults.get(e),e,c)}))},oe=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(P.a)(this,(e=Object(_.a)(t)).call.apply(e,[this].concat(c)))).sortLabel=function(e,t){var a=n.props,c=a.sortBy,o=a.direction,u=a.actions;return r.a.createElement(ae.a,{active:t===c,direction:o,onClick:function(){return u.changeSorting(t)}},e)},n.getResults=function(e,t){return t.entrySeq().toList().map(function(t){var n=Object(T.a)(t,2),a=n[0],r=n[1],c=r||new l.List,o=e.reduce(function(e,t){return e.set(t,c.filter(function(e){return e.weekIndex===t.index&&e.result}))},new l.Map);return{user:a,isLoading:!r,completedCount:c.filter(function(e){return e.result}).size,allCount:c.size,weekResults:o}})},n.resultComparator=function(){var e=n.props,t=e.sortBy,a=e.direction===w.ASC?1:-1;switch(t){case v.NAME:return function(e,t){return a*e.user.displayName.localeCompare(t.user.displayName)};case v.SUM:return function(e,t){return a*(e.completedCount-t.completedCount)};default:return function(e,n){var r=e.weekResults.get(t).size,c=n.weekResults.get(t).size;return a*(r-c)}}},n}return Object(R.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.users,a=t.weeks,c=t.classes,o=this.getResults(a,n).sort(this.resultComparator());return r.a.createElement(ne.a,{className:c.root},r.a.createElement(Q.a,{className:c.table},r.a.createElement(ee.a,null,r.a.createElement(te.a,null,r.a.createElement(Z.a,{className:c.cell},this.sortLabel(v.NAME,v.NAME)),r.a.createElement(Z.a,{className:c.cell},this.sortLabel(v.SUM,v.SUM)),a.map(function(t){return r.a.createElement(Z.a,{className:c.cell,key:t.name,align:"center"},e.sortLabel(t.name,t))}))),r.a.createElement(V.a,null,o.map(function(e){return r.a.createElement(ce,{key:e.user.username,user:e.user,results:e,weeks:a})}))))}}]),t}(a.PureComponent),ue=Object($.a)({root:{width:"100%",marginTop:"1rem",overflowX:"auto"},cell:{border:"1px solid black",padding:"5px"}})(oe),se=function(e){function t(e){var n;return Object(B.a)(this,t),n=Object(P.a)(this,Object(_.a)(t).call(this,e)),e.actions.loadData(),n}return Object(R.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return r.a.createElement(ue,this.props)}}]),t}(a.PureComponent);var ie=Object(u.b)(function(e){return{users:e.users.users,weeks:e.tasks.weeks,tasks:e.tasks.tasks,tab:e.ui.tab,sortBy:e.ui.sortBy,direction:e.ui.direction}},function(e){return{actions:{loadData:function(){return e(Y())},changeSorting:function(t){return e({type:b,payload:{column:t}})}}}})(se),le=Object(j.a)(function(e){return{title:{marginTop:e.spacing(3)}}});function pe(){var e=le();return r.a.createElement(S.a,{maxWidth:"xl"},r.a.createElement(C.a,{className:e.title,variant:"h3",paragraph:!0},"Yandex JS course 2019"),r.a.createElement(D,null),r.a.createElement(ie,null))}var me=E(),fe=function(){return r.a.createElement(u.a,{store:me},r.a.createElement(pe,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[60,1,2]]]);
//# sourceMappingURL=main.3e44b15a.chunk.js.map